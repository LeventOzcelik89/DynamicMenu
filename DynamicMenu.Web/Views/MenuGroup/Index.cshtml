<!-- Menü Tablosu Sayfası -->
<div class="page" id="list" data-page="menu-list">
    <main>

        <div class="data-table-container">
            <table class="table table-bordered table-hover align-middle" id="tbl">
                <thead class="table-light">
                    <tr>
                        <th>Adı</th>
                        <th>Açıklama</th>
                        <th>Aktif mi</th>
                        <th>Menü Tipi</th>
                        <th>Menü Grupları</th>
                        <th>Oluşturma Tarihi</th>
                        <th>Düzenleme Tarihi</th>
                        <th width="120">İşlemler</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

    </main>
</div>

@* <script type="text/template" id="tblRow">

    <tr>
        <td>{{data.Name}}</td>
        <td>{{data.Description}}</td>
        <td>
            <span class="badge bg-{{data.IsActive == true ? 'success' : 'danger'}}">{{data.IsActive == true ? 'Aktif' : 'Pasif'}}</span>
        </td>
            <td>{{data.MenuType}}</td>
            <td>{{data.Menus.map(function(item){ return '<a href="Menu/Management?MenuId=' + item.Id + '&MenuGroupId=' + data.Id + '" class="btn btn-sm btn-info m-1">' + item.Name + '</a>'; }).join(''); }}</td>
            <td>{{new Date(data.CreatedDate).toLocaleString('tr-TR')}}</td>
            <td>{{data.ModifiedDate == null ? '-' : new Date(data.ModifiedDate).toLocaleString('tr-TR')}}</td>
            <td>
                <div class="btn-group" role="group">
                    <a href="/Menu/Index?MenuGroupId={{data.Id}}" class="btn btn-sm btn-success">Yönetim</a>
                    <a data-href="/MenuGroup/Update" class="btn btn-sm btn-primary" data-id="{{data.Id}}" data-modal data-method="get">Düzenle</a>
                    <a data-href="/MenuGroup/Delete?Id={{data.Id}}" data-modal data-ask class="btn btn-sm btn-info">Sil</a>
                </div>
            </td>
        </tr>

</script> *@



@section Scripts {

<script type="text/javascript">

    var page = {

        tbl: null,
        ready: function(){

            //  ReadData('/MenuGroup/GetAll', null, function(res){

                //  TemplateEngine.RenderAll($('#tblRow'), res, $('#tbl tbody'));
                
                $('#tbl').dTable({
                    ajax: { url: '/MenuGroup/GetAll', dataType: 'json', dataSrc: 'objects' },
                    columns: [
                        { data: 'Name' },
                        { data: 'Description' },
                        {
                            data: 'IsActive',
                            render: (data, type, row) => {
                                return '<span class="badge bg-' + row.IsActive == true ? 'success' : 'danger' + '">' + row.IsActive == true ? 'Aktif' : 'Pasif' + '</span>';
                            }
                        },
                        { data: 'MenuType' },
                        {
                            data: 'Menus',
                            render: (data, type, row) => {
                                return row.Menus.map(function(item){ return '<a href="Menu/Management?MenuId=' + row.Id + '&MenuGroupId=' + row.Id + '" class="btn btn-sm btn-info m-1">' + row.Name + '</a>'; }).join('');
                            }
                        },
                        {
                            data: 'CreatedDate',
                            render: (data, type, row) => {
                                return row.CreatedDate == null ? '' : new Date(row.CreatedDate).toLocaleString('tr-TR');
                            }
                        },
                        {
                            data: 'ModifiedDate',
                            render: (data, type, row) => {
                                return row.ModifiedDate == null ? '' : new Date(row.ModifiedDate).toLocaleString('tr-TR');
                            }
                        },
                        {
                            data: null,
                            render: (data, type, row) => {
                                return '<div class="btn-group" role="group">' +
                                        '<a href="/Menu/Index?MenuGroupId=' + row.Id + '" class="btn btn-sm btn-success">Yönetim</a>' +
                                        '<a data-href="/MenuGroup/Update" class="btn btn-sm btn-primary" data-id="' + row.Id + '" data-modal data-method="get">Düzenle</a>' +
                                        '<a data-href="/MenuGroup/Delete?Id=' + row.Id + '" data-modal data-ask class="btn btn-sm btn-info">Sil</a>' +
                                    '</div>';
                            }
                        }
                    ]
                }, 
                [{ 
                    text: 'Add Menu Group', 
                    action: function(){ 
                        Kendo_GetRequest({ url: '/MenuGroup/Insert', method: 'GET', table: $('#tbl') }); 
                    } 
                }]);

            //  });

        }

    };

    $(document)

    .ready(function () {

        page.ready();

    })

    ;

</script>

}
